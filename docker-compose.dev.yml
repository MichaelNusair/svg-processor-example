# Docker Compose for Development
#
# This configuration runs only MongoDB in Docker while you run
# the frontend and backend locally for hot reload support.
#
# Usage:
#   docker-compose -f docker-compose.dev.yml up -d    # Start MongoDB
#   pnpm dev:backend                                   # In another terminal
#   pnpm dev:frontend                                  # In another terminal
#
# Or use the convenience script:
#   pnpm start

services:
  mongodb:
    image: mongo:7
    container_name: svg-processor-mongodb-dev
    restart: unless-stopped
    ports:
      - '27017:27017'
    volumes:
      - mongodb_dev_data:/data/db
    environment:
      MONGO_INITDB_DATABASE: svg-processor
    healthcheck:
      test: ['CMD', 'mongosh', '--eval', "db.adminCommand('ping')"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 10s

volumes:
  mongodb_dev_data:
    driver: local
